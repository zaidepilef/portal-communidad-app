<!-- Botón para mostrar el formulario -->


@if (showNew) {
<div class="card mb-4">
	<div class="card-body">
		<h5 class="card-title">Registrar nueva comunidad</h5>

		<form [formGroup]="form" (ngSubmit)="crearComunidad()">
			<div class="mb-3">
				<label class="form-label">Nombre</label>
				<input type="text" class="form-control" formControlName="name" />
			</div>

			<div class="mb-3">
				<label class="form-label">Dirección</label>
				<input type="text" class="form-control" formControlName="address" />
			</div>

			<div class="mb-3">
				<label class="form-label">Empresa</label>
				<select class="form-select" formControlName="enterprise_id">
					@for (empresa of enterprises; track empresa.id) {
					<option [value]="empresa.id">{{ empresa.razon_social }}</option>
					}
				</select>
			</div>

			<button type="submit" class="btn btn-primary" [disabled]="form.invalid">Guardar</button>
			<button type="button" class="btn btn-secondary ms-2" (click)="cancelar()">Cancelar</button>
		</form>
	</div>
</div>

} @else {
<button class="btn btn-success mb-3" (click)="abrirNuevaComunidad()">
	+ Nueva comunidad
</button>
}

<!-- Formulario para agregar comunidad -->

<!-- Lista de comunidades -->
<div class="row">
	@for (community of communities; track community.id) {
	<div class="col-md-4 mb-4">
		<div class="card h-100">
			<div class="card-body">
				<h5 class="card-title">{{ community.name }}</h5>
				<p class="card-text">{{ community.address }}</p>
				<button class="btn btn-primary btn-sm" (click)="details(community)">Ver detalles</button>
			</div>
		</div>
	</div>
	}
</div>
